library(rvest)
library(stringi)
library(dplyr)
library(xlsx)
library(cleanme)
library(slam)
library(qdap)
library(tm)
library(corpus)
library(stringr)
library(dplyr)
library(tm.plugin.webmining)
library(purrr)
library(tidytext)
library(gutenbergr)
library(ggplot2)
webpage <- read_html(s)
webpage %>% html_nodes(".page-link")
webpage %>% html_attr(".page-link")
webpage
s <- html_session(URL)
URL<-("https://eu.community.samsung.com/t5/forums/searchpage/tab/message?filter=location,dateRangeType&inactive=false&advanced=true&rangeTime=1M&location=category:uk&sort_by=-topicPostDate&collapse_discussion=true&search_type=thread&search_page_size=50")
s <- html_session(URL)
s
multi_pages<-function(i){
s$url<-gsub(" ","",paste(s$url,"/page/",i,"?sort=recent"))
webpage <- read_html(s)
return(webpage)
}
%>% html_attr(".p
webpage
webpage %>% html_attr(".page-link")
webpage
s$url
s$url %>% html_attr(".page-link")
s$url %>% html_attr(".page-link")
s$url
read_html(s$url)
read_html(s$url) %>% html_attr(".page-link")
title<-c()
title
multi_pages
library(rvest)
url<-"https://eu.community.samsung.com/t5/forums/searchpage/tab/message?filter=location,dateRangeType&inactive=false&advanced=true&rangeTime=1M&location=category:uk&sort_by=-topicPostDate&collapse_discussion=true&search_type=thread&search_page_size=50"
webpage <- read_html(url)
rank_data_html <- html_nodes(webpage,'.page-link')
rank_data_html
subject <- html_nodes(webpage,'.page-link')
rank_data <- html_text(ssubject)
rank_data
subject <- html_nodes(webpage,'.page-link')
rank_data <- html_text(subject)
rank_data
subject
subject[1]
rank_data
subject <- html_nodes(webpage,'.page-link')
subject
subject%>% html_attr("href")
href_subject<-subject%>% html_attr("href")
bodies<-c()
bodies<-c()
for(j in href_subject){
j<-gsub(" ","",j)
webpage<-read_html(j)
body<-webpage %>% html_nodes("p~ p+ p") %>% html_text()%>%as.character %>%toString
body<-stringr::str_squish(body)
bodies<-append(bodies,body)
}
href_subject
href_subject[1]
for(i in 1:5){
l<-webpage%>%html_nodes('h3 a') %>% html_attr("href")
l<-gsub("/ /","/",paste(URL,l))
htmlref<-append(htmlref,l)
}
htmlref
for(i in 1:5){
l<-webpage%>%html_nodes('.page-link') %>% html_attr("href")
l<-gsub("/ /","/",paste(URL,l))
htmlref<-append(htmlref,l)
}
htmlref
htrmlref<-()
htmlref<-()
for(i in 1:5){
l<-webpage%>%html_nodes('.page-link') %>% html_attr("href")
l<-gsub("/ /","/",paste(URL,l))
htmlref<-append(htmlref,l)
}
htmlref
htmlref<-()
for(i in 1){
l<-webpage%>%html_nodes('.page-link') %>% html_attr("href")
l<-gsub("/ /","/",paste(URL,l))
htmlref<-append(htmlref,l)
}
htmlref
unique(htmlref)
webpag
webpage
l<-webpage%>%html_nodes('.page-link') %>% html_attr("href")
l
l<-gsub("/ /","/",paste(URL,l))
l
url<-paste("https://eu.community.samsung.com/t5/forums/searchpage/tab/message?filter=location,dateRangeType&inactive=false&advanced=true&rangeTime=1M&location=category:uk&page=")
url2<-"&sort_by=-topicPostDate&collapse_discussion=true&search_type=thread&search_page_size=50"
url<-paste("https://eu.community.samsung.com/t5/forums/searchpage/tab/message?filter=location,dateRangeType&inactive=false&advanced=true&rangeTime=1M&location=category:uk&page=",x,
"&sort_by=-topicPostDate&collapse_discussion=true&search_type=thread&search_page_size=50")
url
url<-paste("https://eu.community.samsung.com/t5/forums/searchpage/tab/message?filter=location,dateRangeType&inactive=false&advanced=true&rangeTime=1M&location=category:uk&page=",x,
"&sort_by=-topicPostDate&collapse_discussion=true&search_type=thread&search_page_size=50")
url
url<-paste("https://eu.community.samsung.com/t5/forums/searchpage/tab/message?filter=location,dateRangeType&inactive=false&advanced=true&rangeTime=1M&location=category:uk&page=",1,
"&sort_by=-topicPostDate&collapse_discussion=true&search_type=thread&search_page_size=50")
url
url<-paste("https://eu.community.samsung.com/t5/forums/searchpage/tab/message?filter=location,dateRangeType&inactive=false&advanced=true&rangeTime=1M&location=category:uk&page=",1,
"&sort_by=-topicPostDate&collapse_discussion=true&search_type=thread&search_page_size=50",sep = "")
url
sep<-function(x){
url<-paste("https://eu.community.samsung.com/t5/forums/searchpage/tab/message?filter=location,dateRangeType&inactive=false&advanced=true&rangeTime=1M&location=category:uk&page=",1,
"&sort_by=-topicPostDate&collapse_discussion=true&search_type=thread&search_page_size=50",sep = "")
}
sep<-function(x){
url<-paste("https://eu.community.samsung.com/t5/forums/searchpage/tab/message?filter=location,dateRangeType&inactive=false&advanced=true&rangeTime=1M&location=category:uk&page=",1,
"&sort_by=-topicPostDate&collapse_discussion=true&search_type=thread&search_page_size=50",sep = "")
return(url)
}
sep(1)
htmlref<-()
for(i in 1:10){
webpage<-sep(i)
l<-webpage%>%html_nodes('.page-link') %>% html_attr("href")
l<-gsub("/ /","/",paste(URL,l))
htmlref<-append(htmlref,l)
}
sep<-function(x){
url<-paste("https://eu.community.samsung.com/t5/forums/searchpage/tab/message?filter=location,dateRangeType&inactive=false&advanced=true&rangeTime=1M&location=category:uk&page=",1,
"&sort_by=-topicPostDate&collapse_discussion=true&search_type=thread&search_page_size=50",sep = "")
return(url)
}
htmlref<-()
htmlref<-()
url<-paste("https://eu.community.samsung.com/t5/forums/searchpage/tab/message?filter=location,dateRangeType&inactive=false&advanced=true&rangeTime=1M&location=category:uk&page=",x,
"&sort_by=-topicPostDate&collapse_discussion=true&search_type=thread&search_page_size=50",sep = "")
sep<-function(x){
url<-paste("https://eu.community.samsung.com/t5/forums/searchpage/tab/message?filter=location,dateRangeType&inactive=false&advanced=true&rangeTime=1M&location=category:uk&page=",x,
"&sort_by=-topicPostDate&collapse_discussion=true&search_type=thread&search_page_size=50",sep = "")
return(url)
}
htmlref<-()
htmlref<-list()
for(i in 1:10){
webpage<-sep(i)
l<-webpage%>%html_nodes('.page-link') %>% html_attr("href")
l<-gsub("/ /","/",paste(URL,l))
htmlref<-append(htmlref,l)
}
htmlref
i
webpage<-sep(i)
l<-webpage%>%html_nodes('.page-link') %>% html_attr("href")
webpage
webpage<-readhtml(webpage)
webpage<-read_html(webpage)
webpage
l<-webpage%>%html_nodes('.page-link') %>% html_attr("href")
l
htmlref<-list()
for(i in 1:10){
webpage<-sep(i)
webpage<-read_html(webpage)
l<-webpage%>%html_nodes('.page-link') %>% html_attr("href")
l<-gsub("/ /","/",paste(URL,l))
htmlref<-append(htmlref,l)
}
htmlref
htmlref<-list()
for(i in 1:10){
webpage<-sep(i)
webpage<-read_html(webpage)
l<-webpage%>%html_nodes('.page-link') %>% html_attr("href")
l<-gsub("/ /","/",paste(URL,l))
l<-unlist(l)
htmlref<-append(htmlref,l)
}
title<-c()
URL
title<-c()
for(i in 1:10){
webpage<-sep(i)
webpage<-read_html(webpage)
j<-webpage %>%html_nodes('.page-link') %>% html_text()
title<-append(title,j)
}
title
library(stringr)
str_replace_all(title[1], "[\r\n]" , "")
str_squish(str_replace_all(title[1], "[\r\n]" , ""))
title<-c()
for(i in 1:10){
webpage<-sep(i)
webpage<-read_html(webpage)
j<-webpage %>%html_nodes('.page-link') %>% html_text()
j<-str_squish(str_replace_all(j, "[\r\n]" , ""))
title<-append(title,j)
}
bodies<-c()
title
bodies<-c()
for(j in htmlref){
j<-gsub(" ","",j)
webpage<-read_html(j)
body<-webpage %>% html_nodes("p~ p+ p") %>% html_text()%>%as.character %>%toString
body<-stringr::str_squish(body)
bodies<-append(bodies,body)
}
bodies
j<-gsub(" ","",j)
j
webpage<-read_html(j)
body<-webpage %>% html_nodes("p~ p+ p") %>% html_text()%>%as.character %>%toString
body
html_nodes("p~ p+ p") %>% html_text()%>%as.character %>%toString
webpage
webpage
j
webpage<-read_html(j)
body<-webpage %>% html_nodes("p~ p+ p") %>% html_text()
body
webpage<-read_html(j)
body<-webpage %>% html_nodes("p~ p+ p") %>% html_text()
body
webpage<-read_html(j)
webpage
body<-webpage %>% html_nodes("p") %>% html_text()
body
body<-webpage %>% html_nodes("#bodyDisplay p") %>% html_text()
body
webpage<-read_html(j)
body<-webpage %>% html_nodes("#bodyDisplay p") %>% html_text()
body
body<-webpage %>% html_nodes("#messageView2_1 .lia-quilt-layout-custom-message") %>% html_text()
body
webpage<-read_html(j)
body<-webpage %>% html_nodes("#messageView2_1 .lia-quilt-layout-custom-message") %>% html_text()
body
webpage<-read_html(j)
body<-webpage %>% html_nodes("#bodyDisplay p") %>% html_text()
body
webpage<-read_html(j)
j
body<-webpage %>% html_nodes("#bodyDisplay p") %>% html_text()
body
body<-webpage %>% html_nodes("p") %>% html_text()
body
body<-webpage %>% html_nodes("p") %>% html_text()[1]
body
webpage<-read_html(j)
body<-webpage %>% html_nodes("p") %>% html_text()[1]
body<-webpage %>% html_nodes("p") %>% html_text()
body<-body[1]
body
j
webpage<-read_html(j)
webpage
body<-webpage %>% html_nodes("p") %>% html_text()
body
htmlref
htmlref<-list()
webpage<-sep(i)
webpage<-read_html(webpage)
webpage
l<-webpage%>%html_nodes('.page-link') %>% html_attr("href")
l
gsub("https://eu.community.samsung.com/","/",paste(URL,l))
l
l<-webpage%>%html_nodes('.page-link') %>% html_attr("href")
l<-gsub("/ /","/",paste("https://eu.community.samsung.com/",l))
l
htmlref<-list()
for(i in 1:10){
webpage<-sep(i)
webpage<-read_html(webpage)
l<-webpage%>%html_nodes('.page-link') %>% html_attr("href")
l<-gsub("/ /","/",paste("https://eu.community.samsung.com/",l))
l<-unlist(l)
htmlref<-append(htmlref,l)
}
title<-c()
for(i in 1:10){
webpage<-sep(i)
webpage<-read_html(webpage)
j<-webpage %>%html_nodes('.page-link') %>% html_text()
j<-str_squish(str_replace_all(j, "[\r\n]" , ""))
title<-append(title,j)
}
title
j<-htmlref[1]
j<-gsub(" ","",j)
j
webpage<-read_html(j)
body<-webpage %>% html_nodes("p") %>% html_text()
body
body<-webpage %>% html_nodes("#bodyDisplay p") %>% html_text()
body
j=htmlref[100]
j
j<-gsub(" ","",j)
webpage<-read_html(j)
body<-webpage %>% html_nodes("#bodyDisplay p") %>% html_text()
body
bodies<-c()
for(j in htmlref){
j<-gsub(" ","",j)
webpage<-read_html(j)
body<-webpage %>% html_nodes("#bodyDisplay p") %>% html_text()
body<-body[1]
body<-stringr::str_squish(body)
bodies<-append(bodies,body)
}
bodies
setwd("~/UK/31st May/tutorial-tf-pipeline-master")
write.csv(bodies,"data_5thjune.csv")
webpage<-read_html(j)
body<-webpage %>% html_nodes("#bodyDisplay p") %>% html_text()
body
unlist(body)
unlist(body)
j<-gsub(" ","",j)
webpage<-read_html(j)
body<-webpage %>% html_nodes("p") %>% html_text()
body
webpage<-read_html(j)
body<-webpage %>% html_nodes("p") %>% html_text()
body
body<-webpage %>% html_nodes("#bodyDisplay p") %>% html_text()
body
htmlref
j
body<-webpage %>% html_nodes("#bodyDisplay p+ p") %>% html_text()
body
body<-webpage %>% html_nodes("#bodyDisplay p+ p") %>% html_text()
body
count(body[1])
str_count(body[1])
body[1]
bodies<-c()
for(j in htmlref){
j<-gsub(" ","",j)
webpage<-read_html(j)
body<-webpage %>% html_nodes("#bodyDisplay p+ p") %>% html_text()
for(i in body){
if(str_count(body[i]))>8{
body[i]<- body[i]
}
}
body<-stringr::str_squish(body)
bodies<-append(bodies,body)
}
for(i in body){
if(str_count(body[i]))>8{
body[i]<- body[i]
}
}
body<-webpage %>% html_nodes("#bodyDisplay p+ p") %>% html_text()
(str_count(body[i]))
(body[i])
i
(str_count(body[1]))
for(i in body){
if(str_count(body[i]))>8{
body[i]<- body[i]
}
}
body
body<-webpage %>% html_nodes("#bodyDisplay p+ p") %>% html_text()
body
body<-webpage %>% html_nodes("#bodyDisplay p+ p") %>% html_text()
body
body
for(i in body){
if(str_count(body[i]))>8{
body[i]<- body[i]
}
}
if(str_count(body[i]))>8{
body[i]<- body[i]
}
for(i in body){
if(str_count(body[i]))>8{
body[i]<- body[i]
}
for(i in body){
if(str_count(body[i]))>8{
body[i]<- body[i]
}
body<-stringr::str_squish(body)
bodies<-append(bodies,body)
}
if(str_count(body[i]))>8{ body[i]<- body[i]}
if(str_count(body[i]))>8{ body[i]= body[i]}
body
for(i in 1:length(body)){
if(str_count(body[i],'\\w+'))>2{
body[i]<-body[i]
}
}
for(i in 1:length(body)){
if(str_count(body[i],'\\w+'))>2{
body[i]<-body[i]
}
}
for(i in 1:length(body)){
if(str_count(body[i],'\\w+'))>2{
body[i]<-body[i]
}
}
if(str_count(body[i],'\\w+'))>2{
body[i]<-body[i]
}
for(i in 1:length(body)){
if(str_count(body[i],'\\w+'))>2{
body[i]<-body[i]
}
}
for(i in 1:length(body)){
if(str_count(body[i],'\\w+'))>2{
body[i]<-body[i]
}
}
for(i in 1:length(body)){
if(str_count(body[i],'\\w+'))>2{
body[i]<-body[i]
}
}
for(i in 1:length(body)){
if(str_count(body[i],'\\w+'))>2{
body[i]<-body[i]
}
}
for(i in 1:length(body)){
if(str_count(body[i],'\\w+'))>2{
body[i]<-body[i]
}
}
length(body)
body
(str_count(body[i],'\\w+'))
(str_count(body[i],'\\w+')
(str_count(body[i],'\\w+')
(str_count(body[i],'\\w+'))
(str_count(body[i],'\\w+'))
)
)
)
)
for(i in 1:length(body)){
if(str_count(body[i],'\\w+'))>2{
body[i]<-body[i]
}
}
1:length(body)
i
for(i in 1:length(body)){
if(str_count(body[i],'\\w+'))>2{
body[i]<-body[i]
}
}
purrr::flatten(body[1])
purrr::flatten(body)
body
body<-webpage %>% html_nodes("#bodyDisplay p+ p") %>% html_text()
purrr::flatten(body)
body
purrr::flatten(body)
body<-list(body)
purrr::flatten(body)
unlist(purrr::flatten(body))
body
body<-body<-list(body)
body
body<-webpage %>% html_nodes("#bodyDisplay p+ p") %>% html_text()
body<-list(body)
body
body<-webpage %>% html_nodes("#bodyDisplay p+ p") %>% html_text()
body[1]+body[2]
body[1]
body[1]+body[2]
paste(body,collapse = '')
bodies<-c()
for(j in htmlref){
j<-gsub(" ","",j)
webpage<-read_html(j)
body<-webpage %>% html_nodes("#bodyDisplay p+ p") %>% html_text()
body<-paste(body,collapse = '')
body<-stringr::str_squish(body)
bodies<-append(bodies,body)
}
bodies
j<-htmlref[471]
j
j<-gsub(" ","",j)
j
webpage<-read_html(j)
body<-webpage %>% html_nodes("#bodyDisplay p+ p") %>% html_text()
body
webpage
body<-webpage %>% html_nodes("#bodyDisplay , #bodyDisplay p") %>% html_text()
body
bodies
write.csv(bodies,"data_5thjune1.csv")
